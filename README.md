# Aiogram бот для условного фитнесс центра

## Функционал

#### /coaches - постраничный вывод всех тренеров
- при выборе тренера открывается страница тренера
- если есть группы - отображается список групп тренера (кликабельно)
- если групп нет - кнопка без действия об отсутствии групп
- кнопка возврата в список тренеров

#### /groups - постраничный вывод всех групп
- при выборе группы открывается страница группы
- если тренер - кнопка тренера (кликабельно)
- если тренера нет - кнопка без действия об отсутствии тренера
- кнопка возврата в список групп

#### /today - расписание на сегодня
- если есть занятия - список занятий на сегодня, каждое в виде { 15:00 - Кроссфит (90 мин) }
- если занятий нет - кнопка без действия об отсутствии занятий

#### /week - расписание на неделю (сегодня + 6 дней)

## Админский функционал

> работает, только если пользователь добавлен как администратор
> нет записи в бд - ⛔ Недостаточно прав

#### /admin - админ панель, 4 кнопки:

### Тренеры

- **Добавить**
  - Добавление нового тренера путем поочередного заполнения полей
  - при завершении информация о тренере - кнопки подтвердить и отменить

- **Изменить/удалить**
  - постраничный вывод всех тренеров
  - кнопка возврата в админ меню

- **Возврат в админ меню**

##### При выборе тренера открывается страница тренера
- **изменить**
список всех полей для изменения, при клике - ввод нового значения, подтверждение/ отмена
- **удалить** - подтверждение удаления
- **добавить группу**
при клике - список всех групп без тренера, клик на группу привязывает ее к тренеру
- если есть группы - отображается **список групп тренера** 
при клике на группу - подтверждение отвязки группы от тренера
- **возврат в список тренеров**

### Группы

- **Добавить**
  - Добавление новой группы путем поочередного заполнения полей
  - при завершении информация о группе - кнопки подтвердить и отменить

- **Изменить/удалить**
  - постраничный вывод всех групп
  - кнопка возврата в админ меню

- **Возврат в админ меню**

##### При выборе группы открывается страница группы
- **изменить**
список всех полей для изменения, при клике - ввод нового значения, подтверждение/ отмена
- **удалить** - подтверждение удаления
- если тренера нет **добавить тренера**
при клике - список всех тренеров, клик на тренера привязывает группу к нему
- если тренера есть - отображается **кнопка тренера** 
при клике на тренера - подтверждение отвязки группы от тренера
- **возврат в список групп**

### Расписание
- **Календарь выбора даты**
  - при клике на дату открывается день с занятиями
  если есть занятия - список в формате { 15:00 - Кроссфит (90 мин) }
    - при клике на **занятие** - подтверждение удаления занятия
    - **добавить занятие** - выбор группы из имеющихся, поочередное заполнение полей, подтверждение/ отмена
    - **назад к календарю**


### Администраторы

- **Добавить**
  - Добавление нового админа путем поочередного заполнения полей
  - при завершении информация об админе - кнопки подтвердить и отменить

- **Изменить/удалить**
  - постраничный вывод всех админов
  - кнопка возврата в админ меню

- **Возврат в админ меню**

##### При выборе админа открывается страница админа
- **изменить**
список всех полей для изменения, при клике - ввод нового значения, подтверждение/ отмена
- **удалить** - подтверждение удаления
- **возврат в список групп**


## Зависимости

```
python = 3.13.5
писалось на нем, на других скорее всего тоже заработает

poetry
asyncio 
aiogram 
sqlalchemy 
alembic 
dotenv 
asyncpg 
aiosqlite 
aiogram-calendar 
```

## Доработка

на текущий момент известна одна проблема:
- при добавления занятия в расписание не срабатывает проверка на пересечение

общий рефакторинг
- часть кода переделана, но больше половины оставлено как есть. возможно там костыли, не уверен

## Установка

установка через **poetry**
`pip install poetry`
`poetry install`

первое включение
- переименовать **env** в **.env** 
- вписать токен бота в **.env** вместо **bot_token**
- поменять настройки базы данных при необходимости
- CHANGE_NAME меняет имя бота при первом включении, если true
- CHANGE_DESCRIPTION меняет описание бота при первом включении, если true

`alembic upgrade head`
`py main.py`